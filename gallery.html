<<<<<<< Updated upstream
<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Gallery — The Wedding Crashers</title>

<style>
:root{
  --bg:#ffffff; --text:#111216;
  --accent:#f19bb8;
  --wrap-max:1080px;      /* controls overall gallery width (2 columns) */
  --gap:12px;
  --max:1180px;
}

*{box-sizing:border-box}
body{margin:0;background:var(--bg);color:var(--text);font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial}
a{color:inherit;text-decoration:none}

/* Uniform pink nav */
.nav{position:sticky;top:0;z-index:40;background:var(--accent)}
.nav-inner{max-width:var(--max);margin:0 auto;height:66px;display:flex;align-items:center;justify-content:center;padding:0 20px}
.menu{display:flex;gap:22px}
.menu a{color:#fff;text-transform:uppercase;letter-spacing:.14em;font-size:14px;line-height:1;padding:8px 2px}

/* --- Gallery (max two columns, centered, no overflow) --- */
.section{padding:40px 0}
h1{margin:0 0 16px;text-align:center;text-transform:uppercase;letter-spacing:.08em}

.gallery-wrap{max-width:var(--wrap-max);margin:0 auto;padding:0 16px 60px}
.gallery-grid{
  display:grid;
  grid-template-columns: repeat(3, 1fr); /* now 3 per row */
  gap: var(--gap);
  justify-items:center;
}
/* Consistent tile shape so portrait & landscape align cleanly */
.gallery-item{
  width:100%;
  background:#f4f4f4;
  border-radius:10px;
  overflow:hidden;
  position:relative;
  aspect-ratio: 4 / 5;        /* <- change to taste (e.g., 1/1 for squares) */
}
.gallery-item img{
  position:absolute; inset:0;
  width:100%; height:100%;
  object-fit:cover;
  object-position:center;
  display:block;
  transition:transform .25s ease;
}
.gallery-item:hover img{transform:scale(1.02)}

@media (max-width:700px){
  .gallery-grid{ grid-template-columns: 1fr; } /* drop to 1 per row on mobile */
}

/* Lightbox */
#lightbox{border:0;padding:0;max-width:90vw;max-height:90vh}
#lightbox::backdrop{background:rgba(0,0,0,.75)}
#lightbox img{display:block;width:100%;height:auto;max-height:90vh}
#lightbox .close{position:absolute;top:8px;right:10px;background:transparent;border:0;color:#fff;font-size:28px;line-height:1;cursor:pointer}

/* Safety: prevent any sideways scroll */
html,body{max-width:100%;overflow-x:hidden}
</style>
</head>
<body>

<nav class="nav">
  <div class="nav-inner">
    <div class="menu" role="navigation" aria-label="Main">
      <a href="index.html">Home</a>
      <a href="packages.html">Packages</a>
      <a href="gallery.html">Gallery</a>
      <a href="video.html">Video</a>
      <a href="contact.html">Contact</a>
    </div>
  </div>
</nav>

<main>
  <section class="section">
    <h1>Gallery</h1>
  </section>

  <section class="section">
    <div class="gallery-wrap">
      <div id="galleryGrid" class="gallery-grid"></div>
      <noscript>Please enable JavaScript to view the gallery.</noscript>
    </div>
  </section>

  <dialog id="lightbox">
    <button class="close" aria-label="Close">&times;</button>
    <img alt=""/>
  </dialog>
</main>

<script>
(function(){
  /* Use explicit, non-overlapping patterns and dedupe by a normalized key
     (folder/name without extension, lowercased). Adjust counts if needed. */
  
  var PATTERNS = [
    { kind: 'range', folder: 'images', prefix: '3-', start: 1, end: 60, ext: 'png' },
    { kind: 'parenMulti', folder: 'images', start: 1, end: 292, exts: ['jpg','jpeg','png'] },
    { kind: 'range', folder: 'images', prefix: '6-', start: 1, end: 120, ext: 'jpg' },
    { kind: 'range', folder: 'images', prefix: '9-', start: 1, end: 140, ext: 'jpg' },
    { kind: 'range', folder: 'images', prefix: '10-', start: 1, end: 40, ext: 'jpg' }
  ];
    

  function buildList(){
    var seen = new Set();
    var out = [];
    function key(folder, stem){
      return (folder + '/' + stem).toLowerCase();
    }
    PATTERNS.forEach(function(p){
      if(p.kind === 'range'){
        for(var i=p.start;i<=p.end;i++){
          var stem = (p.prefix + i);
          var k = key(p.folder, stem);
          if(!seen.has(k)){
            seen.add(k);
            out.push(p.folder + '/' + stem + '.' + p.ext);
          }
        }
      } else if(p.kind === 'parenMulti'){
        for(var j=p.start;j<=p.end;j++){
          for(var e=0; e<p.exts.length; e++){
            var stem = '(' + j + ')';
            var k2 = key(p.folder, stem + '.' + p.exts[e]);
            if(!seen.has(k2)){
              seen.add(k2);
              out.push(p.folder + '/' + stem + '.' + p.exts[e]);
            }
          }
        }
      } else if(p.kind === 'paren'){
        for(var j=p.start;j<=p.end;j++){
          var stem = '(' + j + ')';
          var k2 = key(p.folder, stem);
          if(!seen.has(k2)){
            seen.add(k2);
            out.push(p.folder + '/' + stem + '.' + p.ext);
          }
        }
      }
    });
    return out;
  }

  var IMAGES = buildList();

  var grid = document.getElementById('galleryGrid');
  if(!grid) return;

  function createItem(src){
    var a = document.createElement('a');
    a.href = src; a.className = 'gallery-item'; a.setAttribute('data-full', src);
    var img = document.createElement('img');
    img.loading = 'lazy'; img.decoding = 'async'; img.alt = '';
    img.src = src;
    img.onerror = function(){
      // Remove tile on 404 so missing files don't show.
      var parent = a.parentNode; if(parent){ parent.removeChild(a); }
    };
    a.appendChild(img);
    return a;
  }

  var CHUNK_SIZE = 60, index = 0;
  function appendChunk(){
    var end = Math.min(index + CHUNK_SIZE, IMAGES.length);
    for (var i = index; i < end; i++) grid.appendChild(createItem(IMAGES[i]));
    index = end;
    if(index >= IMAGES.length && sentinel && sentinel.parentNode){
      sentinel.parentNode.removeChild(sentinel);
      observer && observer.disconnect();
    }
  }
  appendChunk();

  var sentinel = document.createElement('div');
  sentinel.setAttribute('aria-hidden', 'true');
  sentinel.style.height = '1px';
  grid.after(sentinel);

  var observer = ('IntersectionObserver' in window) ? new IntersectionObserver(function(entries){
    entries.forEach(function(e){ if(e.isIntersecting){ appendChunk(); }});
  }) : null;

  if(observer){ observer.observe(sentinel); }
  else {
    function idleTick(){
      if(index < IMAGES.length){ appendChunk(); setTimeout(idleTick, 300); }
    }
    (window.requestIdleCallback || function(fn){ setTimeout(fn, 300); })(idleTick);
  }

  // Simple lightbox
  var dlg = document.getElementById('lightbox');
  grid.addEventListener('click', function(e){
    var a = e.target.closest('.gallery-item'); if(!a) return;
    e.preventDefault();
    dlg.querySelector('img').src = a.getAttribute('data-full');
    dlg.showModal();
  });
  dlg.querySelector('.close').addEventListener('click', function(){ dlg.close(); });
  dlg.addEventListener('click', function(e){ if(e.target === dlg) dlg.close(); });
})();
</script>

</body>
</html>
=======
---
# Jekyll front matter so GitHub Pages processes Liquid
---
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Gallery</title>
  <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
  <meta http-equiv="Pragma" content="no-cache">
  <meta http-equiv="Expires" content="0">
  <style>
    :root{ --bg:#111; --fg:#fff; --muted:#aaa; --card:#000; --border:#333; }
    body{ margin:0; font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif; background:var(--bg); color:var(--fg); }
    header{ padding:12px 16px; font-size:14px; opacity:.8 }
    .grid{ display:grid; grid-template-columns: repeat(auto-fill, minmax(300px, 1fr)); gap:12px; padding:16px; max-width:1400px; margin:0 auto; }
    .item{ position:relative; overflow:hidden; border-radius:8px; background:var(--card); }
    .item img{ width:100%; height:100%; object-fit:cover; display:block; }
    .ph{ position:absolute; inset:0; display:flex; align-items:center; justify-content:center; font-size:12px; color:var(--muted); border:1px dashed var(--border); }
    .notice{ max-width:760px; margin:24px auto; padding:16px; border:1px dashed var(--border); border-radius:8px; color:var(--muted); }
    code{ background:#222; padding:2px 6px; border-radius:4px; }
  </style>
</head>
<body>
  <header>Gallery</header>
  <main>
    <div id="grid" class="grid"></div>
    <div id="msg" class="notice" style="display:none"></div>
  </main>

  <!-- Liquid will render this into a JSON array on GitHub Pages. Locally it will contain raw tags. -->
  <script type="application/json" id="filelist">
  [
    {% assign imgs = site.static_files | where_exp: "f", "f.path contains '/images/'" %}
    {% for f in imgs %}
      {% assign ext = f.extname | downcase %}
      {% assign nm = f.name | downcase %}
      {% if ext == '.jpg' or ext == '.jpeg' or ext == '.png' or ext == '.webp' %}
        {% unless nm contains '(' %}
          "{{ f.path | uri_escape | escape }}"{% unless forloop.last %},{% endunless %}
        {% endunless %}
      {% endif %}
    {% endfor %}
  ]
  </script>

  <script>
    const v = '20251019204922'; // cache-buster
    const grid = document.getElementById('grid');
    const msg  = document.getElementById('msg');

    function createItem(src){
      const wrap = document.createElement('div');
      wrap.className = 'item';

      const img = document.createElement('img');
      img.loading = 'lazy';
      img.decoding = 'async';
      img.alt = '';
      img.src = src + (src.includes('?') ? '&' : '?') + 'v=' + v;

      const ph = document.createElement('div');
      ph.className = 'ph';
      ph.textContent = 'Loading…';

      wrap.appendChild(ph);
      wrap.appendChild(img);
      img.addEventListener('load', () => ph.remove());
      img.addEventListener('error', () => wrap.remove());
      return wrap;
    }

    function showMessage(html){
      msg.style.display = 'block';
      msg.innerHTML = html;
    }

    // Try to parse the JSON list (works on live GitHub Pages).
    let files = [];
    try{
      const raw = document.getElementById('filelist').textContent.trim();
      // Quick heuristic: if it still contains Liquid tags, skip parsing.
      if(raw.includes('{%') || raw.includes('{{')){
        throw new Error('Liquid not processed');
      }
      files = JSON.parse(raw);
    }catch(e){
      // Graceful local fallback
      showMessage(
        'To see your real images list, open this page on your live site (GitHub Pages) so Jekyll can build it.<br><br>' +
        'Local preview tip: this file intentionally avoids crashing offline. Push it, then visit ' +
        '<code>https://YOURDOMAIN/gallery.html?v=' + v + '</code> after deploy.'
      );
    }

    if(Array.isArray(files) && files.length){
      files.forEach(src => grid.appendChild(createItem(src)));
    }else if(!msg.textContent){
      showMessage('No images were found in <code>/images</code>.');
    }
  </script>
</body>
</html>
>>>>>>> Stashed changes
